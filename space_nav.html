 <!-- first attempt at drawing animations: squares  -->
<style>
  #can {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: radial-gradient(circle, #345, #200);
  }
</style>
<html>
  <body>
    <canvas id="can"></canvas> 
  </body>
</html>
<script>
  var can = document.getElementById("can");
  can.height = window.innerHeight;
  can.width = window.innerWidth;
  var ctx = can.getContext("2d");
  // rectangle vars
  var ratio = can.height / can.width;
  var startwidth = 70;
  var startheight = Math.floor(startwidth * ratio);
  var startx = Math.floor(can.width / 2) - startwidth - 10;
  var starty = (can.height * 3)/4 - startheight;
  var ds = 9;
  var sqrs = [];
  var sqrnum = 7;
  var fps = 15;
  var id;
  // planet vars
  var planetR = can.width *3;
  var planetX = Math.floor(can.width/2);
  var planetY = planetR + can.height + 30;
  var planetIter = 0;
  var planetIterCount = 20;

  function shift(val, rat) {
    return Math.floor(val * rat);
  }
  
  onload = function increment() {
    setTimeout( function() {
      id = requestAnimationFrame(increment);

      if (sqrs.length <= sqrnum) {
        sqrs.push({x:startx, y:starty, height:startheight, width:startwidth, delta:ds});
      }
      ctx.clearRect(0,0,can.width,can.height);


      // draw planet
      var grad = ctx.createRadialGradient(planetX, planetY, planetR-20, planetX, planetY, planetR);
      grad.addColorStop(0, "black");
      grad.addColorStop(1, "red");
      ctx.fillStyle = grad;
      ctx.arc(planetX, planetY, planetR, 0, Math.PI, true);
      ctx.fill();

      dropS = false;
      // render rectangles on another canvas to avoid redrawing everything on every update:
      var sCanvas = document.createElement("canvas");
      sCanvas.width = can.width;
      sCanvas.height = can.height;
      var sContext = sCanvas.getContext("2d");
      sContext.strokeStyle = "#009900";
      // draw rectangles
      for (i=0; i < sqrs.length; i++) {
        s = sqrs[i];
        sContext.strokeRect(s.x,s.y,s.width,s.height);

        // transform for next frame
        s.width += s.delta;
        s.height += s.delta * ratio;
        wrat = s.width / window.innerWidth;
        hrat = s.height / window.innerHeight;
        s.x -= Math.floor(s.delta/2);
        s.y -= (Math.floor(s.y * hrat)/ 3);
        s.delta += 1 + ((1 + wrat)^2);

        // only move planet after so many cycles
        planetIter++;
        if (planetIter == planetIterCount) {
          planetY -=1;
          planetIter = 0;
          if ((planetY - planetR) <= (can.height*3/4)) {
            cancelAnimationFrame(id);
          }
        }

        if (s.width >= window.innerWidth || s.height >= window.innerHeight) {
          dropS = true;
        }
      }
      ctx.drawImage(sCanvas, 0, 0);
      // remove large rectangle. It's going to be the 0th array element, because it's the oldest
      if (dropS) {
        sqrs.shift();
        dropS = false;
      }

    }, 1000/fps)
  }
</script>
